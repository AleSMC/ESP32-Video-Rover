[env:esp32cam]
platform = espressif32
board = esp32cam
framework = arduino

; --- Upload Hardware Configuration ---
; Explicit protocol to avoid ambiguity in environments with multiple tools
upload_protocol = esptool
; Reduced speed to mitigate noise on long USB cables or unstable adapters
upload_speed = 115200

; --- Serial Monitor Configuration ---
; Baud rate for the debug console
monitor_speed = 115200
; Output processing filters:
; - esp32_exception_decoder: Decodes Backtrace on fatal errors (Crash dump)
; - time: Adds a timestamp to each log line
; - default: Maintains standard behavior
monitor_filters = esp32_exception_decoder, time, default

; --- Memory & Partition Management ---
; 'Huge App' partition scheme (3MB APP / 1MB FS) required for Video/WiFi stacks
board_build.partitions = huge_app.csv
; LittleFS filesystem for efficient non-volatile storage
board_build.filesystem = littlefs

; --- Preprocessor Macros & Global Config ---
build_flags = 
    ; Hardware model definition for the camera library
    -D CAMERA_MODEL_AI_THINKER
    ; Core debug level (0 = Disabled) for runtime optimization
    -D CORE_DEBUG_LEVEL=0
    ; Centralized mDNS hostname definition (will be used as "rover.local")
    ; Quotes are escaped to pass as a string literal to the C++ compiler
    -D MDNS_NAME=\"rover\"
    ; Allow libraries in /lib to access files in /include (like secrets.h)
    -I include

; --- Project Dependencies (Libraries) ---
lib_deps =
    ; PWM control for servo motors
    madhephaestus/ESP32Servo @ ^3.0.5
    
    ; Network Stack: mDNS, WiFi, Async TCP, and Web Server
    ESPmDNS
    WiFi
    AsyncTCP
    ESPAsyncWebServer
    ArduinoJson

; --- Dependency Conflict Management ---
; Forced exclusion of incompatible or deprecated libraries to prevent linker errors
lib_ignore =
    RPAsyncTCP
    ESPAsyncTCP
    WebServer

[platformio]
; Standard directory structure
src_dir = src
include_dir = include
